المهمة: تنفيذ منطق صفحة البداية (Home) واختيار الفئات وإعداد اللعبة - مشروع "جاوب"


---

الوصف العام:

نريد تعديل الصفحة الرئيسية للمشروع لتعمل بالشكل التالي:


---

1. تسجيل الدخول شرط أساسي لاختيار الفئات

إذا لم يكن المستخدم مسجل الدخول:

لا يمكنه اختيار أي فئة.

عند محاولة اختيار فئة، يتم توجيهه تلقائيًا إلى /login.


بعد تسجيل الدخول بنجاح:

يتم إرجاعه مباشرة إلى الصفحة الرئيسية /.




---

2. اختيار الفئات (من 4 إلى 8)

عند تسجيل الدخول، يمكن للمستخدم اختيار الفئات من المربعات المعروضة.

عند الضغط على أي فئة:

يتم تفعيلها (إضافتها إلى قائمة الفئات المختارة).

إذا كانت الفئة مفعلة مسبقًا، يتم إلغاء تفعيلها (إزالتها من القائمة).


يجب أن يظهر Modal صغير (نافذة منبثقة) عند كل اختيار/إلغاء، يحتوي على:

عدد الفئات المختارة حاليًا.

قائمة الفئات المختارة (أيقونة + الاسم).

زر "ابدأ اللعب" يظهر فقط عند اختيار 4 فئات على الأقل.




---

3. Modal إعدادات اللعبة

عند الضغط على زر "ابدأ اللعب"، يظهر مودال إعدادات اللعبة ويحتوي على الحقول التالية:

اسم اللعبة (نص - مطلوب).

عدد الفرق (Select من 2 إلى 4 فرق).

حقول إدخال أسماء الفرق:

يتم عرض عدد من الحقول حسب اختيار عدد الفرق.

مثال: إذا اختار 3 فرق، تظهر 3 حقول لإدخال أسماء الفرق.


وقت الإجابة الأولى (Input رقمي بالثواني، مثلاً 30 ثانية).

وقت الإجابة الثانية (Input رقمي، مثلاً 15 ثانية).

زر "ابدأ اللعبة" النهائي:

عند الضغط عليه، يتم تخزين إعدادات اللعبة والفئات المختارة.

ينتقل المستخدم إلى صفحة /play أو /gameplay.




---

4. ملاحظات تقنية للمبرمج:

استخدم useState لإدارة:

الفئات المختارة.

بيانات إعدادات اللعبة.


استخدم useContext أو localStorage لتخزين بيانات اللعبة مؤقتًا إلى حين بدء اللعب.

تأكد من عرض 4 فئات في كل صف (Grid: 4 أعمدة).

يمكن استخدام Modal من مكتبة مثل:

@headlessui/react

أو أي مكتبة Modal متوافقة مع Tailwind.


تحقق من التوكن أو user.isAuthenticated عند التحميل لتحديد حالة الدخول.



---

شكل البيانات المتوقع بعد الإعداد:

{
  "gameName": "لعبة الأصدقاء",
  "teams": [
    { "name": "الفريق الأزرق" },
    { "name": "الفريق الأحمر" }
  ],
  "answerTimeFirst": 30,
  "answerTimeSecond": 15,
  "selectedCategories": [12, 15, 18, 20] // IDs للفئات
}


---